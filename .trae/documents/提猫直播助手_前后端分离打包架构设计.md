# æçŒ«ç›´æ’­åŠ©æ‰‹ - å‰åç«¯åˆ†ç¦»æ‰“åŒ…æ¶æ„è®¾è®¡

## 1. æ¶æ„è®¾è®¡

```mermaid
graph TD
    A[ç”¨æˆ·æ¡Œé¢] --> B[Electronå‰ç«¯åº”ç”¨]
    B --> C[æœ¬åœ°PythonæœåŠ¡é›†ç¾¤]
    
    subgraph "å‰ç«¯å±‚ (Electron)"
        B1[React UI - ç«¯å£10030]
        B2[Electronä¸»è¿›ç¨‹]
        B3[APIå®¢æˆ·ç«¯é…ç½®]
    end
    
    subgraph "åç«¯æœåŠ¡é›†ç¾¤ (Python)"
        C1[ä¸»æœåŠ¡å™¨ - FastAPI - ç«¯å£9019]
        C2[DouyinLiveWebFetcher - WebSocketæŠ“å–]
        C3[StreamCap - å½•åˆ¶æœåŠ¡ - ç«¯å£6006]
        C4[AST_module - è¯­éŸ³è½¬å½•]
        C5[æœåŠ¡å¯åŠ¨å™¨ - ç»Ÿä¸€ç®¡ç†]
    end
    
    subgraph "æ‰“åŒ…äº§ç‰©"
        D1[TimaoBackend.exe - PythonæœåŠ¡åŒ…]
        D2[TalkingCat-Portable.exe - Electronåº”ç”¨]
    end
    
    B --> C1
    C1 --> C2
    C1 --> C3
    C1 --> C4
    C5 --> C1
    C5 --> C2
    C5 --> C3
    C5 --> C4
```

## 2. æŠ€æœ¯æè¿°

### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React@18 + TypeScript + Vite
- **æ¡Œé¢å£³**: Electron@38.1.2
- **UIåº“**: TailwindCSS@3.4.3
- **çŠ¶æ€ç®¡ç†**: Zustand@4.5.2
- **å›¾è¡¨**: Chart.js@4.5.1 + react-chartjs-2@5.3.1

### åç«¯æŠ€æœ¯æ ˆ
- **ä¸»æœåŠ¡**: FastAPI + Uvicorn (ç«¯å£9019)
- **æŠ–éŸ³æŠ“å–**: DouyinLiveWebFetcher + WebSocket
- **å½•åˆ¶æœåŠ¡**: StreamCap + Flet (ç«¯å£6006)
- **è¯­éŸ³è½¬å½•**: AST_module + FunASR + SenseVoice
- **æ‰“åŒ…å·¥å…·**: PyInstaller

## 3. è·¯ç”±å®šä¹‰

| è·¯ç”± | ç”¨é€” |
|------|------|
| / | ä¸»é¡µé¢ï¼Œæ˜¾ç¤ºç›´æ’­ç›‘æ§é¢æ¿ |
| /login | ç”¨æˆ·ç™»å½•é¡µé¢ |
| /dashboard | æ•°æ®åˆ†æä»ªè¡¨æ¿ |
| /settings | ç³»ç»Ÿè®¾ç½®é¡µé¢ |
| /voice-transcription | è¯­éŸ³è½¬å½•ç®¡ç†é¡µé¢ |
| /recording | å½•åˆ¶ç®¡ç†é¡µé¢ |

## 4. APIå®šä¹‰

### 4.1 æ ¸å¿ƒAPI

**æœåŠ¡å¥åº·æ£€æŸ¥**
```
GET /health
```

Response:
| å‚æ•°å | å‚æ•°ç±»å‹ | æè¿° |
|--------|----------|------|
| status | string | æœåŠ¡çŠ¶æ€ |
| services | object | å„æœåŠ¡çŠ¶æ€è¯¦æƒ… |

**æŠ–éŸ³ç›´æ’­ç›‘æ§**
```
POST /api/douyin/start
```

Request:
| å‚æ•°å | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…éœ€ | æè¿° |
|--------|----------|----------|------|
| live_id | string | true | æŠ–éŸ³ç›´æ’­é—´ID |
| config | object | false | ç›‘æ§é…ç½®å‚æ•° |

Response:
| å‚æ•°å | å‚æ•°ç±»å‹ | æè¿° |
|--------|----------|------|
| success | boolean | å¯åŠ¨æ˜¯å¦æˆåŠŸ |
| session_id | string | ä¼šè¯ID |

**è¯­éŸ³è½¬å½•æœåŠ¡**
```
POST /api/ast/start
```

Request:
| å‚æ•°å | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…éœ€ | æè¿° |
|--------|----------|----------|------|
| audio_config | object | true | éŸ³é¢‘é…ç½® |
| model_config | object | false | æ¨¡å‹é…ç½® |

**å½•åˆ¶æœåŠ¡ç®¡ç†**
```
POST /api/streamcap/start
```

Request:
| å‚æ•°å | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…éœ€ | æè¿° |
|--------|----------|----------|------|
| platform | string | true | ç›´æ’­å¹³å° |
| stream_url | string | true | ç›´æ’­æµåœ°å€ |

## 5. æœåŠ¡å™¨æ¶æ„å›¾

```mermaid
graph TD
    A[Electronå‰ç«¯] --> B[APIç½‘å…³å±‚]
    B --> C[æœåŠ¡ç¼–æ’å±‚]
    C --> D[ä¸šåŠ¡æœåŠ¡å±‚]
    D --> E[æ•°æ®å­˜å‚¨å±‚]

    subgraph "APIç½‘å…³å±‚"
        B1[FastAPIè·¯ç”±]
        B2[CORSä¸­é—´ä»¶]
        B3[è®¤è¯ä¸­é—´ä»¶]
    end

    subgraph "æœåŠ¡ç¼–æ’å±‚"
        C1[æœåŠ¡å¯åŠ¨å™¨]
        C2[è¿›ç¨‹ç®¡ç†å™¨]
        C3[å¥åº·æ£€æŸ¥å™¨]
    end

    subgraph "ä¸šåŠ¡æœåŠ¡å±‚"
        D1[DouyinLiveService]
        D2[StreamCapService]
        D3[ASTService]
        D4[WebSocketManager]
    end

    subgraph "æ•°æ®å­˜å‚¨å±‚"
        E1[SQLiteæ•°æ®åº“]
        E2[Redisç¼“å­˜]
        E3[æ–‡ä»¶å­˜å‚¨]
    end
```

## 6. æ•°æ®æ¨¡å‹

### 6.1 æ•°æ®æ¨¡å‹å®šä¹‰

```mermaid
erDiagram
    SERVICE_STATUS ||--o{ SERVICE_LOG : generates
    SERVICE_STATUS ||--o{ HEALTH_CHECK : monitors
    LIVE_SESSION ||--o{ COMMENT_DATA : contains
    LIVE_SESSION ||--o{ AUDIO_TRANSCRIPT : produces

    SERVICE_STATUS {
        string service_name PK
        string status
        int port
        datetime last_heartbeat
        json config
    }

    SERVICE_LOG {
        int id PK
        string service_name FK
        string level
        string message
        datetime timestamp
    }

    HEALTH_CHECK {
        int id PK
        string service_name FK
        boolean is_healthy
        float response_time
        datetime check_time
    }

    LIVE_SESSION {
        string session_id PK
        string live_id
        string platform
        datetime start_time
        datetime end_time
        string status
    }

    COMMENT_DATA {
        int id PK
        string session_id FK
        string user_name
        string content
        datetime timestamp
        json metadata
    }

    AUDIO_TRANSCRIPT {
        int id PK
        string session_id FK
        string transcript_text
        float confidence
        datetime timestamp
        string audio_file_path
    }
```

### 6.2 æ•°æ®å®šä¹‰è¯­è¨€

**æœåŠ¡çŠ¶æ€è¡¨ (service_status)**
```sql
-- åˆ›å»ºæœåŠ¡çŠ¶æ€è¡¨
CREATE TABLE service_status (
    service_name VARCHAR(50) PRIMARY KEY,
    status VARCHAR(20) NOT NULL DEFAULT 'stopped',
    port INTEGER,
    last_heartbeat TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    config JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_service_status_updated ON service_status(updated_at DESC);
CREATE INDEX idx_service_status_status ON service_status(status);

-- åˆå§‹åŒ–æ•°æ®
INSERT INTO service_status (service_name, status, port) VALUES
('fastapi_main', 'stopped', 9019),
('douyin_fetcher', 'stopped', NULL),
('streamcap', 'stopped', 6006),
('ast_module', 'stopped', NULL);
```

**ç›´æ’­ä¼šè¯è¡¨ (live_sessions)**
```sql
-- åˆ›å»ºç›´æ’­ä¼šè¯è¡¨
CREATE TABLE live_sessions (
    session_id VARCHAR(36) PRIMARY KEY,
    live_id VARCHAR(50) NOT NULL,
    platform VARCHAR(20) NOT NULL DEFAULT 'douyin',
    start_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    end_time TIMESTAMP,
    status VARCHAR(20) DEFAULT 'active',
    config JSON,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_live_sessions_live_id ON live_sessions(live_id);
CREATE INDEX idx_live_sessions_start_time ON live_sessions(start_time DESC);
CREATE INDEX idx_live_sessions_status ON live_sessions(status);

-- åˆå§‹åŒ–æ•°æ®
INSERT INTO live_sessions (session_id, live_id, platform, status) VALUES
('demo-session-001', '123456789', 'douyin', 'stopped');
```

**è¯„è®ºæ•°æ®è¡¨ (comment_data)**
```sql
-- åˆ›å»ºè¯„è®ºæ•°æ®è¡¨
CREATE TABLE comment_data (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id VARCHAR(36) NOT NULL,
    user_name VARCHAR(100),
    content TEXT NOT NULL,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    metadata JSON,
    FOREIGN KEY (session_id) REFERENCES live_sessions(session_id)
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_comment_data_session_id ON comment_data(session_id);
CREATE INDEX idx_comment_data_timestamp ON comment_data(timestamp DESC);
```

## 7. æ‰“åŒ…é…ç½®æ–¹æ¡ˆ

### 7.1 PythonæœåŠ¡æ‰“åŒ…é…ç½®

**æœåŠ¡å¯åŠ¨å™¨ (service_launcher.py)**
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æçŒ«ç›´æ’­åŠ©æ‰‹ - ç»Ÿä¸€æœåŠ¡å¯åŠ¨å™¨
"""

import os
import sys
import time
import signal
import logging
import subprocess
import threading
from pathlib import Path
from typing import Dict, List, Optional

class ServiceManager:
    """æœåŠ¡ç®¡ç†å™¨"""
    
    def __init__(self):
        self.services: Dict[str, subprocess.Popen] = {}
        self.running = False
        self.base_dir = Path(__file__).parent
        
    def start_service(self, name: str, cmd: List[str], cwd: Optional[str] = None):
        """å¯åŠ¨å•ä¸ªæœåŠ¡"""
        try:
            process = subprocess.Popen(
                cmd,
                cwd=cwd or self.base_dir,
                stdout=subprocess.PIPE,
                stderr=subprocess.PIPE,
                text=True
            )
            self.services[name] = process
            logging.info(f"âœ… æœåŠ¡ {name} å·²å¯åŠ¨ (PID: {process.pid})")
            return True
        except Exception as e:
            logging.error(f"âŒ å¯åŠ¨æœåŠ¡ {name} å¤±è´¥: {e}")
            return False
    
    def start_all_services(self):
        """å¯åŠ¨æ‰€æœ‰æœåŠ¡"""
        self.running = True
        
        # 1. å¯åŠ¨ä¸»FastAPIæœåŠ¡
        self.start_service(
            "fastapi_main",
            [sys.executable, "-m", "uvicorn", "server.app.main:app", 
             "--host", "127.0.0.1", "--port", "9019"],
            cwd=self.base_dir
        )
        
        # 2. å¯åŠ¨StreamCapæœåŠ¡
        self.start_service(
            "streamcap",
            [sys.executable, "StreamCap/main.py", "--port", "6006"],
            cwd=self.base_dir
        )
        
        # ç­‰å¾…æœåŠ¡å¯åŠ¨
        time.sleep(3)
        
        # 3. å¥åº·æ£€æŸ¥
        self.health_check()
        
    def health_check(self):
        """å¥åº·æ£€æŸ¥"""
        import requests
        
        services_to_check = [
            ("FastAPIä¸»æœåŠ¡", "http://127.0.0.1:9019/health"),
            ("StreamCapæœåŠ¡", "http://127.0.0.1:6006/health"),
        ]
        
        for name, url in services_to_check:
            try:
                response = requests.get(url, timeout=5)
                if response.status_code == 200:
                    logging.info(f"âœ… {name} å¥åº·æ£€æŸ¥é€šè¿‡")
                else:
                    logging.warning(f"âš ï¸ {name} å¥åº·æ£€æŸ¥å¼‚å¸¸: {response.status_code}")
            except Exception as e:
                logging.error(f"âŒ {name} å¥åº·æ£€æŸ¥å¤±è´¥: {e}")
    
    def stop_all_services(self):
        """åœæ­¢æ‰€æœ‰æœåŠ¡"""
        self.running = False
        
        for name, process in self.services.items():
            try:
                process.terminate()
                process.wait(timeout=10)
                logging.info(f"âœ… æœåŠ¡ {name} å·²åœæ­¢")
            except subprocess.TimeoutExpired:
                process.kill()
                logging.warning(f"âš ï¸ å¼ºåˆ¶ç»ˆæ­¢æœåŠ¡ {name}")
            except Exception as e:
                logging.error(f"âŒ åœæ­¢æœåŠ¡ {name} å¤±è´¥: {e}")
        
        self.services.clear()

def signal_handler(signum, frame):
    """ä¿¡å·å¤„ç†å™¨"""
    logging.info("æ”¶åˆ°åœæ­¢ä¿¡å·ï¼Œæ­£åœ¨å…³é—­æœåŠ¡...")
    service_manager.stop_all_services()
    sys.exit(0)

if __name__ == "__main__":
    # é…ç½®æ—¥å¿—
    logging.basicConfig(
        level=logging.INFO,
        format='%(asctime)s - %(levelname)s - %(message)s'
    )
    
    # æ³¨å†Œä¿¡å·å¤„ç†å™¨
    signal.signal(signal.SIGINT, signal_handler)
    signal.signal(signal.SIGTERM, signal_handler)
    
    # å¯åŠ¨æœåŠ¡ç®¡ç†å™¨
    service_manager = ServiceManager()
    
    try:
        logging.info("ğŸš€ å¯åŠ¨æçŒ«ç›´æ’­åŠ©æ‰‹åç«¯æœåŠ¡...")
        service_manager.start_all_services()
        
        # ä¿æŒè¿è¡Œ
        while service_manager.running:
            time.sleep(1)
            
    except KeyboardInterrupt:
        logging.info("ç”¨æˆ·ä¸­æ–­ï¼Œæ­£åœ¨å…³é—­æœåŠ¡...")
    finally:
        service_manager.stop_all_services()
```

**PyInstalleræ‰“åŒ…è„šæœ¬ (build_backend.py)**
```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
åç«¯æœåŠ¡æ‰“åŒ…è„šæœ¬
"""

import os
import sys
import shutil
import subprocess
from pathlib import Path

def build_backend():
    """æ„å»ºåç«¯æœåŠ¡"""
    
    project_root = Path(__file__).parent
    dist_dir = project_root / "dist"
    
    # æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶
    if dist_dir.exists():
        shutil.rmtree(dist_dir)
    
    # PyInstallerå‘½ä»¤
    cmd = [
        "pyinstaller",
        "--onefile",
        "--name", "TimaoBackend",
        "--distpath", str(dist_dir),
        "--workpath", str(project_root / "build"),
        "--specpath", str(project_root),
        
        # æ·»åŠ æ•°æ®æ–‡ä»¶
        "--add-data", f"server{os.pathsep}server",
        "--add-data", f"DouyinLiveWebFetcher{os.pathsep}DouyinLiveWebFetcher",
        "--add-data", f"StreamCap{os.pathsep}StreamCap",
        "--add-data", f"AST_module{os.pathsep}AST_module",
        
        # éšè—å¯¼å…¥
        "--hidden-import", "uvicorn",
        "--hidden-import", "fastapi",
        "--hidden-import", "websockets",
        "--hidden-import", "aiofiles",
        "--hidden-import", "sqlalchemy",
        "--hidden-import", "funasr",
        "--hidden-import", "flet",
        
        # æ’é™¤ä¸éœ€è¦çš„æ¨¡å—
        "--exclude-module", "tkinter",
        "--exclude-module", "matplotlib",
        
        # å¯åŠ¨è„šæœ¬
        "service_launcher.py"
    ]
    
    print("ğŸ”¨ å¼€å§‹æ„å»ºåç«¯æœåŠ¡...")
    result = subprocess.run(cmd, cwd=project_root)
    
    if result.returncode == 0:
        print("âœ… åç«¯æœåŠ¡æ„å»ºæˆåŠŸ!")
        print(f"ğŸ“¦ è¾“å‡ºæ–‡ä»¶: {dist_dir / 'TimaoBackend.exe'}")
    else:
        print("âŒ åç«¯æœåŠ¡æ„å»ºå¤±è´¥!")
        sys.exit(1)

if __name__ == "__main__":
    build_backend()
```

### 7.2 å‰ç«¯Electronæ‰“åŒ…é…ç½®

**ä¿®æ”¹åçš„package.jsonæ„å»ºé…ç½®**
```json
{
  "build": {
    "appId": "com.xingjuai.talkingcat",
    "productName": "æçŒ«ç›´æ’­åŠ©æ‰‹",
    "artifactName": "TalkingCat-${version}-${os}-${arch}.${ext}",
    "directories": {
      "output": "dist"
    },
    "files": [
      "electron/**/*",
      "!electron/renderer/node_modules",
      "package.json"
    ],
    "extraFiles": [
      {
        "from": "dist/TimaoBackend.exe",
        "to": "resources/backend/TimaoBackend.exe"
      }
    ],
    "win": {
      "target": "portable",
      "icon": "assets/icon.ico",
      "artifactName": "TalkingCat-Portable-${version}-${arch}.exe"
    }
  }
}
```

**å‰ç«¯APIé…ç½® (src/config/api.ts)**
```typescript
// APIé…ç½®
export const API_CONFIG = {
  // åç«¯æœåŠ¡åœ°å€
  BASE_URL: 'http://127.0.0.1:9019',
  
  // æœåŠ¡ç«¯ç‚¹
  ENDPOINTS: {
    HEALTH: '/health',
    DOUYIN: '/api/douyin',
    STREAMCAP: '/api/streamcap',
    AST: '/api/ast',
    WEBSOCKET: 'ws://127.0.0.1:9019/ws'
  },
  
  // è¶…æ—¶é…ç½®
  TIMEOUT: 30000,
  
  // é‡è¯•é…ç½®
  RETRY: {
    attempts: 3,
    delay: 1000
  }
};

// æœåŠ¡çŠ¶æ€æ£€æŸ¥
export async function checkBackendHealth(): Promise<boolean> {
  try {
    const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.HEALTH}`, {
      method: 'GET',
      timeout: 5000
    });
    return response.ok;
  } catch (error) {
    console.error('åç«¯æœåŠ¡å¥åº·æ£€æŸ¥å¤±è´¥:', error);
    return false;
  }
}
```

## 8. éƒ¨ç½²å’Œåˆ†å‘ç­–ç•¥

### 8.1 æ„å»ºæµç¨‹

```bash
# 1. æ„å»ºåç«¯æœåŠ¡
python build_backend.py

# 2. æ„å»ºå‰ç«¯åº”ç”¨
npm run build:win64

# 3. éªŒè¯æ„å»ºäº§ç‰©
ls -la dist/
```

### 8.2 ç”¨æˆ·å®‰è£…æµç¨‹

1. **ä¸‹è½½å®‰è£…åŒ…**
   - `TalkingCat-Portable-1.0.0-x64.exe` (å‰ç«¯åº”ç”¨)
   - `TimaoBackend.exe` (åç«¯æœåŠ¡ï¼Œå·²å†…åµŒåˆ°å‰ç«¯åº”ç”¨ä¸­)

2. **å¯åŠ¨åº”ç”¨**
   - ç”¨æˆ·åŒå‡» `TalkingCat-Portable-1.0.0-x64.exe`
   - Electronåº”ç”¨è‡ªåŠ¨å¯åŠ¨å†…åµŒçš„åç«¯æœåŠ¡
   - å‰ç«¯ç•Œé¢è¿æ¥åˆ°æœ¬åœ°åç«¯æœåŠ¡

3. **æœåŠ¡ç›‘æ§**
   - åº”ç”¨å†…ç½®æœåŠ¡å¥åº·æ£€æŸ¥
   - è‡ªåŠ¨é‡å¯å¼‚å¸¸æœåŠ¡
   - ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

### 8.3 é”™è¯¯å¤„ç†å’Œç›‘æ§

**æœåŠ¡ç›‘æ§ç»„ä»¶ (src/components/ServiceMonitor.tsx)**
```typescript
import React, { useEffect, useState } from 'react';
import { checkBackendHealth } from '../config/api';

export const ServiceMonitor: React.FC = () => {
  const [serviceStatus, setServiceStatus] = useState({
    backend: false,
    douyin: false,
    streamcap: false,
    ast: false
  });

  useEffect(() => {
    const checkServices = async () => {
      const backendHealthy = await checkBackendHealth();
      setServiceStatus(prev => ({
        ...prev,
        backend: backendHealthy
      }));
    };

    // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡æœåŠ¡çŠ¶æ€
    const interval = setInterval(checkServices, 30000);
    checkServices(); // ç«‹å³æ‰§è¡Œä¸€æ¬¡

    return () => clearInterval(interval);
  }, []);

  return (
    <div className="service-monitor">
      <h3>æœåŠ¡çŠ¶æ€</h3>
      <div className="status-grid">
        <div className={`status-item ${serviceStatus.backend ? 'healthy' : 'unhealthy'}`}>
          <span>åç«¯æœåŠ¡</span>
          <span>{serviceStatus.backend ? 'âœ… æ­£å¸¸' : 'âŒ å¼‚å¸¸'}</span>
        </div>
        {/* å…¶ä»–æœåŠ¡çŠ¶æ€... */}
      </div>
    </div>
  );
};
```

### 8.4 è·¨å¹³å°å…¼å®¹æ€§

**å¹³å°ç‰¹å®šé…ç½®**
```javascript
// electron/main.js
const { app, BrowserWindow, shell } = require('electron');
const path = require('path');
const { spawn } = require('child_process');

class BackendManager {
  constructor() {
    this.backendProcess = null;
    this.backendPath = this.getBackendPath();
  }

  getBackendPath() {
    const isDev = process.env.NODE_ENV === 'development';
    if (isDev) {
      return path.join(__dirname, '..', 'dist', 'TimaoBackend.exe');
    }
    
    // ç”Ÿäº§ç¯å¢ƒè·¯å¾„
    return path.join(process.resourcesPath, 'backend', 'TimaoBackend.exe');
  }

  async startBackend() {
    try {
      this.backendProcess = spawn(this.backendPath, [], {
        detached: false,
        stdio: 'pipe'
      });

      this.backendProcess.on('error', (error) => {
        console.error('åç«¯æœåŠ¡å¯åŠ¨å¤±è´¥:', error);
      });

      console.log('âœ… åç«¯æœåŠ¡å·²å¯åŠ¨');
      return true;
    } catch (error) {
      console.error('å¯åŠ¨åç«¯æœåŠ¡æ—¶å‡ºé”™:', error);
      return false;
    }
  }

  stopBackend() {
    if (this.backendProcess) {
      this.backendProcess.kill();
      this.backendProcess = null;
      console.log('âœ… åç«¯æœåŠ¡å·²åœæ­¢');
    }
  }
}

// åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
const backendManager = new BackendManager();

app.whenReady().then(async () => {
  await backendManager.startBackend();
  createWindow();
});

app.on('before-quit', () => {
  backendManager.stopBackend();
});
```

## 9. æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 9.1 å¯åŠ¨ä¼˜åŒ–
- åç«¯æœåŠ¡å¹¶è¡Œå¯åŠ¨
- å‰ç«¯æ‡’åŠ è½½éå…³é”®ç»„ä»¶
- é¢„çƒ­å…³é”®APIè¿æ¥

### 9.2 èµ„æºä¼˜åŒ–
- å‹ç¼©Pythonä¾èµ–åŒ…
- ä¼˜åŒ–Electronåº”ç”¨ä½“ç§¯
- ä½¿ç”¨å¢é‡æ›´æ–°æœºåˆ¶

### 9.3 ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- å¯åŠ¨ç”»é¢å’Œè¿›åº¦æç¤º
- æœåŠ¡å¼‚å¸¸è‡ªåŠ¨æ¢å¤
- ç¦»çº¿æ¨¡å¼æ”¯æŒ

---

*æ–‡æ¡£ç‰ˆæœ¬: v1.0*  
*æœ€åæ›´æ–°: 2024å¹´12æœˆ*  
*ç»´æŠ¤å›¢é˜Ÿ: æçŒ«ç›´æ’­åŠ©æ‰‹å¼€å‘å›¢é˜Ÿ*