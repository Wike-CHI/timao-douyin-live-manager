# 🧮 提猫直播助手 - AI Token 消耗与成本分析

> **场景**：6 小时直播，使用 Qwen-Max 模型  
> **分析频率**：每 1 分钟分析一次 + 每小时 30 次话术生成  
> **计算日期**：2025-10-26

---

## 📊 使用场景说明

### 实时分析功能（每 1 分钟）
- **功能**：`LiveAnalysisGenerator.generate()`
- **作用**：分析主播口播、观众弹幕，生成实时观察卡片
- **频率**：每 60 秒触发一次

### AI 话术生成（每小时 30 次）
- **功能**：`LiveQuestionResponder.generate_answer()` 或 `SmartTopicGenerator.generate_contextual_topics()`
- **作用**：根据弹幕问题生成回答建议，或生成互动话题
- **频率**：根据弹幕活跃度，约每 2 分钟触发一次

---

## 🔢 Token 消耗计算

### 1️⃣ 实时分析 - 单次 Token 消耗

#### 输入 Token（Prompt）

**System Prompt**：~800 tokens
```
- 角色定义：80 tokens
- 任务说明：150 tokens
- JSON 格式要求：300 tokens
- 写作要求（9条）：270 tokens
```

**User Prompt**：~1000-1500 tokens（取平均 1200 tokens）
```
- 聚焦建议：50 tokens
- 主播画像：100 tokens
- 知识库参考（3条）：200 tokens
- 时间窗口标记：10 tokens
- 口播节选（200字）：~260 tokens
- 观众互动摘录（12条弹幕）：~240 tokens
- 优质弹幕（4条）：~100 tokens
- 互动分类统计：80 tokens
- 主播口播情况：120 tokens
- 讨论焦点候选（5个话题）：40 tokens
```

**输入总计**：~2000 tokens

#### 输出 Token（Completion）

**JSON 响应**：~600-800 tokens（取平均 700 tokens）
```json
{
  "analysis_overview": "30字",
  "audience_sentiment": {"label": "热", "signals": ["2条证据"]},
  "engagement_highlights": ["2条观察"],
  "risks": ["2条问题"],
  "next_actions": ["3条指引"],
  "next_topic_direction": "12字",
  "confidence": 0.85,
  "style_profile": {...},
  "vibe": {...}
}
```

**单次实时分析总 Token**：
- 输入：~2000 tokens
- 输出：~700 tokens
- **合计**：~2700 tokens

---

### 2️⃣ AI 话术生成 - 单次 Token 消耗

#### 场景 A：回答观众问题

**输入 Token**：~1000 tokens
```
- System Prompt：400 tokens
- 观众问题：30-50 tokens
- 最近转录文本：200 tokens
- 主播风格参考：150 tokens
- 知识库片段（1-2条）：150 tokens
```

**输出 Token**：~200 tokens
```
- 回答建议（1-3条）：150 tokens
- 话术要点：50 tokens
```

**单次问答总 Token**：~1200 tokens

---

#### 场景 B：智能话题生成

**输入 Token**：~900 tokens
```
- System Prompt：400 tokens
- 直播上下文：200 tokens
- 弹幕关键词：100 tokens
- 主播风格 + 氛围：100 tokens
- 当前话题：100 tokens
```

**输出 Token**：~600 tokens
```json
[
  {"topic": "话题1", "category": "日常生活"},
  {"topic": "话题2", "category": "兴趣爱好"},
  ...
]
// 6个话题，每个约100 tokens
```

**单次话题生成总 Token**：~1500 tokens

---

### 3️⃣ 6 小时直播总消耗

#### 实时分析（每分钟）
- 总次数：6 小时 × 60 分钟 = **360 次**
- 单次消耗：2700 tokens
- **总消耗**：360 × 2700 = **972,000 tokens**

#### AI 话术生成（每小时 30 次）
混合场景：
- 问答（20次/小时）：1200 tokens × 20 = 24,000 tokens
- 话题生成（10次/小时）：1500 tokens × 10 = 15,000 tokens
- 小计（每小时）：39,000 tokens

6 小时总计：
- 总次数：6 × 30 = **180 次**
- **总消耗**：6 × 39,000 = **234,000 tokens**

---

#### 📌 总消耗汇总

| 功能模块 | 次数 | 单次 Token | 总 Token |
|---------|------|-----------|----------|
| 实时分析 | 360 | 2,700 | 972,000 |
| AI 话术生成 | 180 | 1,300（平均） | 234,000 |
| **合计** | **540** | - | **1,206,000** |

**6 小时直播总消耗**：约 **120 万 Tokens** (~1.2M tokens)

---

## 💰 费用计算

### Qwen-Max 定价（2025年10月标准）

| 模型 | 输入价格 | 输出价格 |
|------|---------|---------|
| qwen-max | ¥0.02 / 1K tokens | ¥0.06 / 1K tokens |

**说明**：通义千问采用阶梯定价，大量调用有折扣，此处按标准价格计算。

---

### 详细费用拆解

#### 1️⃣ 实时分析费用

**输入费用**：
- 输入 Token：360 × 2000 = 720,000 tokens
- 费用：(720,000 / 1000) × ¥0.02 = **¥14.40**

**输出费用**：
- 输出 Token：360 × 700 = 252,000 tokens
- 费用：(252,000 / 1000) × ¥0.06 = **¥15.12**

**实时分析小计**：¥14.40 + ¥15.12 = **¥29.52**

---

#### 2️⃣ AI 话术生成费用

**输入费用**：
- 问答（120次）：120 × 1000 = 120,000 tokens
- 话题（60次）：60 × 900 = 54,000 tokens
- 输入合计：174,000 tokens
- 费用：(174,000 / 1000) × ¥0.02 = **¥3.48**

**输出费用**：
- 问答（120次）：120 × 200 = 24,000 tokens
- 话题（60次）：60 × 600 = 36,000 tokens
- 输出合计：60,000 tokens
- 费用：(60,000 / 1000) × ¥0.06 = **¥3.60**

**AI 话术生成小计**：¥3.48 + ¥3.60 = **¥7.08**

---

### 💎 总费用汇总

| 项目 | 输入费用 | 输出费用 | 小计 |
|------|---------|---------|------|
| 实时分析（360次） | ¥14.40 | ¥15.12 | ¥29.52 |
| AI 话术生成（180次） | ¥3.48 | ¥3.60 | ¥7.08 |
| **合计** | **¥17.88** | **¥18.72** | **¥36.60** |

**6 小时直播 AI 成本**：约 **¥37** 元

---

## 📈 不同套餐成本对比

### 按月使用频率估算

假设主播每月直播情况：

| 直播强度 | 每月直播时长 | 每月直播场次 | 月消耗 Token | 月费用 |
|---------|------------|------------|------------|--------|
| 轻度主播 | 60 小时（10场×6h） | 10 场 | 12M tokens | ¥366 |
| 中度主播 | 120 小时（20场×6h） | 20 场 | 24M tokens | ¥732 |
| 重度主播 | 180 小时（30场×6h） | 30 场 | 36M tokens | ¥1,098 |

### 通义千问批量折扣（参考）

| 月消费额 | 折扣 | 实际成本 |
|---------|------|---------|
| < ¥500 | 无折扣 | 原价 |
| ¥500-2000 | 9 折 | -10% |
| ¥2000-5000 | 8.5 折 | -15% |
| > ¥5000 | 8 折 | -20% |

**示例**：重度主播月费 ¥1,098，可能享受 9 折，实际支付 **¥988/月**

---

## 🎯 优化建议

### 降低成本方案

#### 方案 1：调整分析频率（推荐）
- **当前**：每 1 分钟分析一次
- **优化**：每 2 分钟分析一次（直播间活跃时保持 1 分钟）
- **节省**：成本降低 50%（约 ¥18/场）

#### 方案 2：使用 Qwen-Plus（性价比模型）
- **价格**：输入 ¥0.004/1K，输出 ¥0.012/1K（是 Qwen-Max 的 1/5）
- **性能**：准确率略低 5-10%，但日常分析足够用
- **节省**：成本降低 80%（约 ¥7/场）

#### 方案 3：混合模型策略
- **实时分析**：使用 Qwen-Plus（低成本，高频）
- **话术生成**：使用 Qwen-Max（高质量，低频）
- **节省**：成本降低 60%（约 ¥14/场）

#### 方案 4：智能触发机制
- **冷场时**：降低分析频率至 5 分钟一次
- **活跃时**：提升至 30 秒一次
- **话术生成**：仅在检测到问题或关键词时触发
- **节省**：根据直播间活跃度，节省 30-50%

---

### 成本对比表（6 小时直播）

| 方案 | 模型 | 分析频率 | 总成本 | 节省 |
|------|------|---------|--------|------|
| **当前方案** | Qwen-Max | 1分钟/次 | ¥37 | - |
| 方案1（降频） | Qwen-Max | 2分钟/次 | ¥19 | -49% |
| 方案2（换模型） | Qwen-Plus | 1分钟/次 | ¥7 | -81% |
| 方案3（混合） | Plus+Max | 1分钟/次 | ¥15 | -59% |
| 方案4（智能） | Qwen-Max | 动态调整 | ¥20 | -46% |

**推荐方案**：方案 3（混合模型） + 方案 4（智能触发）
- **成本**：约 ¥10-15/场
- **质量**：核心功能不妥协
- **性价比**：最优

---

## 💼 商业模式建议

### 订阅套餐设计（考虑成本）

#### 🆓 免费版
- **AI 功能**：关闭（仅语音转写 + 弹幕）
- **成本**：¥0
- **定价**：免费

#### 💎 基础版 - ¥29/月
- **AI 次数**：500 次/月（约 8 场直播）
- **成本**：¥80（使用 Qwen-Plus）
- **毛利**：-¥51（亏损引流款）

#### 🌟 专业版 - ¥99/月
- **AI 次数**：无限次
- **成本**：¥120-200/月（中度主播）
- **毛利**：-¥21 至 -¥101（需优化）

#### 🚀 企业版 - ¥299/月
- **AI 次数**：无限次 + 优先队列
- **成本**：¥150-300/月（重度主播）
- **毛利**：-¥1 至 +¥149

---

### 💡 盈利优化方案

#### 策略 1：阶梯定价
```
基础版：¥29/月（500次分析）
专业版：¥99/月（2000次分析）
企业版：¥299/月（无限次）
超量包：¥0.1/次（超出套餐后按次付费）
```

#### 策略 2：成本转嫁
- 使用 Qwen-Plus 作为默认模型
- Qwen-Max 作为付费升级选项（+¥50/月）
- 降低 80% 成本，提升利润空间

#### 策略 3：公会批量
- 公会购买 100 席位，单价 ¥59/人/月
- 总收入：¥5,900/月
- 总成本：¥2,000-3,000/月（规模效应）
- 毛利：¥2,900-3,900/月

#### 策略 4：增值服务
- 基础功能：本地语音转写（免费）
- AI 分析：按需付费（¥0.08/次）
- 数据报告：¥19/份
- 专属定制：¥999/月

---

## 📊 实际运营数据预测

### 场景 A：100 付费用户

| 套餐 | 用户数 | 月收入 | AI成本 | 毛利 |
|------|--------|--------|--------|------|
| 基础版 | 50 | ¥1,450 | ¥2,000 | -¥550 |
| 专业版 | 40 | ¥3,960 | ¥4,800 | -¥840 |
| 企业版 | 10 | ¥2,990 | ¥1,500 | +¥1,490 |
| **合计** | **100** | **¥8,400** | **¥8,300** | **+¥100** |

**结论**：刚好保本，需要优化定价或降低成本。

---

### 场景 B：500 付费用户（使用优化方案）

**成本优化**：
- 80% 用户使用 Qwen-Plus（成本降低 80%）
- 20% 用户购买 Qwen-Max 升级包（+¥50/月）

| 套餐 | 用户数 | 月收入 | AI成本 | 毛利 |
|------|--------|--------|--------|------|
| 基础版 | 250 | ¥7,250 | ¥4,000 | +¥3,250 |
| 专业版 | 200 | ¥19,800 | ¥9,600 | +¥10,200 |
| 企业版 | 50 | ¥14,950 | ¥7,500 | +¥7,450 |
| **合计** | **500** | **¥42,000** | **¥21,100** | **+¥20,900** |

**结论**：月毛利 ¥20,900，扣除服务器 + 人力（约 ¥15,000），净利 **¥5,900/月**。

---

## 🎯 关键建议

### 给产品团队
1. **默认使用 Qwen-Plus**，Qwen-Max 作为高级选项
2. **智能触发机制**：根据直播间活跃度调整分析频率
3. **分级功能**：免费版关闭 AI，付费版分次数限制
4. **超量提醒**：接近套餐上限时提醒主播升级

### 给运营团队
1. **试用策略**：7 天免费无限次，降低门槛
2. **公会合作**：批量采购给折扣（6-8折）
3. **按需付费**：推出 ¥0.08/次的弹性套餐
4. **绑定销售**：AI 功能 + 培训课程打包销售

### 给技术团队
1. **缓存策略**：相似上下文复用分析结果
2. **批量调用**：合并多个请求降低 API 调用次数
3. **本地预处理**：用本地 NLP 过滤低质量弹幕
4. **监控告警**：实时监控成本，异常时自动降级

---

## 📝 总结

### 当前方案成本
- **6 小时直播**：约 ¥37
- **月度主播（20场）**：约 ¥740
- **重度主播（30场）**：约 ¥1,110

### 优化后成本（推荐）
- **6 小时直播**：约 ¥10-15
- **月度主播（20场）**：约 ¥200-300
- **重度主播（30场）**：约 ¥300-450

### 盈利能力
- **100 用户**：基本保本
- **500 用户**（优化后）：月净利 ¥5,900
- **1000 用户**（规模化）：月净利 ¥20,000+

### 核心策略
1. ✅ 使用 Qwen-Plus 作为默认模型（降低 80% 成本）
2. ✅ 智能触发机制（节省 30-50% 调用）
3. ✅ 阶梯定价 + 按需付费（灵活商业模式）
4. ✅ 公会批量合作（规模效应）

---

**文档更新时间**：2025-10-26  
**计算基准**：Qwen-Max 官方定价（输入 ¥0.02/1K，输出 ¥0.06/1K）  
**建议审核周期**：每月复核成本，根据实际数据调整策略
