# 提猫直播助手 - 自动化安装脚本使用说明

## 脚本概述

本项目提供了多个自动化安装脚本，用于快速设置和启动提猫直播助手应用程序。

## 可用脚本

### 1. `simple_setup.bat` (推荐)
- **描述**: 简化版安装脚本，语法简洁，兼容性最好
- **特点**: 
  - 避免复杂的变量操作
  - 清晰的步骤提示
  - 良好的错误处理
  - 支持中文显示

### 2. `auto_setup_and_start_gbk.bat` (已修复)
- **描述**: 功能完整的安装脚本，包含详细的环境检测
- **修复内容**:
  - 修复了echo语句中括号的语法错误
  - 关闭了调试模式以避免不必要的暂停
  - 改善了中文编码显示

### 3. `auto_setup_and_start_ps.bat` (实验性)
- **描述**: 针对PowerShell环境优化的脚本
- **状态**: 仍存在兼容性问题，不推荐使用

## 脚本功能

所有脚本都会自动执行以下操作：

### 环境检测与安装
1. **Python 3.11.9**
   - 检测是否已安装
   - 自动下载并静默安装
   - 配置环境变量

2. **Node.js 22.17.0**
   - 检测是否已安装
   - 自动下载并静默安装
   - 配置环境变量

### 项目依赖安装
3. **Python虚拟环境**
   - 创建`.venv`虚拟环境
   - 激活虚拟环境
   - 安装Python依赖包

4. **Node.js依赖**
   - 安装根目录依赖
   - 安装electron目录依赖
   - 安装electron/renderer目录依赖

### 应用启动
5. **多服务启动**
   - 后端服务器 (Python FastAPI)
   - 前端开发服务器 (React + Vite)
   - Electron桌面应用

## 使用方法

### 方法一：双击运行 (推荐)
1. 双击 `simple_setup.bat` 文件
2. 等待脚本自动完成所有安装步骤
3. 脚本会自动启动应用程序

### 方法二：命令行运行
```cmd
# 进入项目目录
cd D:\gsxm\timao-douyin-live-manager

# 运行脚本
simple_setup.bat
```

## 注意事项

### 系统要求
- Windows 10/11
- 管理员权限（用于安装软件）
- 稳定的网络连接（用于下载依赖）

### 运行环境
- **推荐**: 在cmd命令提示符中运行
- **避免**: 在PowerShell中运行（可能存在兼容性问题）

### 常见问题

#### 1. 编码问题
- 脚本已设置UTF-8编码页
- 如仍有乱码，请确保终端支持UTF-8

#### 2. 权限问题
- 以管理员身份运行脚本
- 确保有写入临时目录的权限

#### 3. 网络问题
- 确保网络连接稳定
- 如下载失败，可重新运行脚本

#### 4. 依赖安装失败
- 检查Python和Node.js是否正确安装
- 手动运行相关安装命令进行调试

## 手动安装步骤

如果自动脚本失败，可按以下步骤手动安装：

### 1. 安装Python 3.11.9
```cmd
# 下载并安装Python
# https://www.python.org/ftp/python/3.11.9/python-3.11.9-amd64.exe
```

### 2. 安装Node.js 22.17.0
```cmd
# 下载并安装Node.js
# https://nodejs.org/dist/v22.17.0/node-v22.17.0-x64.msi
```

### 3. 创建虚拟环境
```cmd
cd D:\gsxm\timao-douyin-live-manager
python -m venv .venv
.venv\Scripts\activate.bat
```

### 4. 安装Python依赖
```cmd
# 根目录依赖
pip install -r requirements.txt

# server目录依赖
cd server
pip install -r requirements.txt
cd ..
```

### 5. 安装Node.js依赖
```cmd
# 根目录依赖
npm install

# electron目录依赖
cd electron
npm install
cd ..

# electron/renderer目录依赖
cd electron/renderer
npm install
cd ../..
```

### 6. 启动应用
```cmd
# 启动后端服务器
start cmd /k ".venv\Scripts\activate.bat && cd server && python app.py"

# 启动前端开发服务器
start cmd /k "cd electron/renderer && npm run dev"

# 启动Electron应用
start cmd /k "cd electron && npm start"
```

## 故障排除

### 脚本修复历史
1. **括号语法错误**: 修复了echo语句中括号未转义的问题
2. **调试模式**: 关闭了DEBUG_MODE以避免不必要的暂停
3. **编码问题**: 设置UTF-8编码页改善中文显示
4. **PowerShell兼容性**: 创建了简化版本避免复杂语法

### 日志查看
- 脚本执行过程中会显示详细的步骤信息
- 如遇错误，请查看错误提示信息
- 可以手动执行失败的步骤进行调试

## 联系支持

如果遇到问题，请：
1. 检查系统要求是否满足
2. 尝试以管理员身份运行
3. 查看错误日志信息
4. 尝试手动安装步骤

---

**最后更新**: 2024年12月
**脚本版本**: v1.2 (简化版)
**兼容性**: Windows 10/11, cmd环境