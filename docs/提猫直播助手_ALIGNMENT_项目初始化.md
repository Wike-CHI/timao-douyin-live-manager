# 提猫直播助手 · 需求对齐文档

## 项目上下文分析

### 现有项目结构

- **项目名称**: timao-douyin-live-manager
- **现有模块**:
  - `douyin_live_fecter_module/` - 抖音直播数据抓取模块
  - `AST_module/` - AST相关模块
  - `main/` - 主程序模块
  - `test/` - 测试模块
- **技术栈**: Python + Electron混合架构
- **代码量估算**: 中小型项目（预计3-5K行代码）

### 业务域理解

- **核心业务**: 抖音直播评论实时分析与AI话术生成
- **用户角色**: 直播主播
- **使用场景**: 直播过程中实时获取观众反馈并生成互动话术

## 需求规范确认

### 功能需求

1. **评论抓取模块**

   - 实时抓取抖音直播间评论
   - 支持模拟数据流（开发阶段）
   - 环形缓冲区存储最近200条评论
2. **AI话术生成**

   - 基于最近评论聚合分析
   - 调用LLM API生成1-2句可直接使用的话术
   - 支持多AI提供商切换（DeepSeek/OpenAI/豆包）
3. **桌面端看板**

   - Electron桌面应用
   - 三区域布局：评论流/热词榜/题词区
   - 30秒自动刷新题词
   - 实时数据展示

### 非功能需求

- **性能**: 评论→题词端到端延迟 ≤ 2s
- **可用性**: 一键启动（npm run dev）
- **可维护性**: 模块化架构，清晰分层
- **扩展性**: 支持多AI提供商，可扩展评论源

### 技术约束

- **前端**: Electron + HTML/CSS + 少量原生JS
- **后端**: Python Flask (REST + SSE)
- **通信**: HTTP API + Server-Sent Events
- **存储**: 内存缓存，无持久化需求
- **部署**: 本地运行，端口5001

## 边界与限制

### 项目范围内

✅ 实时评论抓取与展示
✅ 热词统计与排序
✅ AI话术生成
✅ 桌面端三区看板
✅ 基础配置管理

### 项目范围外

❌ 数据持久化存储
❌ 用户账号系统
❌ 多直播间同时监控
❌ 复杂的数据分析报表
❌ 移动端支持

## 验收标准

### 可量化指标

1. **启动时间**: 从执行命令到界面可用 ≤ 10s
2. **响应延迟**: 评论抓取到话术生成 ≤ 2s
3. **数据容量**: 支持200条评论缓存，10条题词历史
4. **界面刷新**: 30s自动刷新题词，实时更新评论流

### 功能验证

- [ ] 克隆项目后可一键启动
- [ ] 界面正常显示三个区域
- [ ] 评论流实时滚动更新
- [ ] 热词榜按频次排序
- [ ] AI题词每30s自动生成
- [ ] 配置文件正确加载环境变量

## 关键假设与依赖

### 技术假设

- 抖音直播评论API可正常访问
- LLM API服务稳定可用
- Electron与Flask进程间通信正常

### 外部依赖

- Node.js 环境 (≥16.x)
- Python 环境 (≥3.8)
- 网络连接（访问AI API）

## 风险识别

### 高风险

- 抖音API变更导致评论抓取失效
- AI API调用频率限制或费用问题

### 中风险

- Electron与Flask进程管理复杂性
- 实时数据流的内存管理

### 低风险

- UI界面兼容性问题
- 配置文件格式错误

## 待澄清问题

1. **抖音评论抓取**: websocket / 使用k2 / douyin_live_fecter开源代码库
2. **AI提供商优先级**:qwen/doubao
3. **热词过滤**: 需要一定量的热词过滤
4. **界面主题**: 可爱科技风

---

*文档创建时间: 2025/9/20*
*状态: 待确认*
